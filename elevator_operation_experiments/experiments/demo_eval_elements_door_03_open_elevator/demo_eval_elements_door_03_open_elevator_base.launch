<launch>
    <include file="$(find elevator_operation)/launch/elevator_operation.launch">
        <arg name="robot_type" value="fetch" />
    </include>

    <include file="$(find elevator_operation)/launch/elevator_door_detector.launch">
        <arg name="input_topic_points" value="/head_camera/depth_registered/points" />
        <arg name="elevator_door_frame_id" value="eng2/7f/elevator_door" />
        <arg name="prefix" value="" />
    </include>

    <node name="sample_manager" pkg="nodelet" type="nodelet" args="manager" />

    <node name="organized_multi_plane_segmentation" pkg="nodelet" type="nodelet" args="load jsk_pcl/OrganizedMultiPlaneSegmentation sample_manager">
        <remap from="~input" to="/head_camera/depth_registered/points" />
        <rosparam>
          publish_normal: true
        </rosparam>
    </node>

    <node name="normal_concatenater" pkg="nodelet" type="nodelet" args="load jsk_pcl_utils/NormalConcatenater sample_manager">
        <remap from="~input" to="/head_camera/depth_registered/points" />
        <remap from="~normal" to="organized_multi_plane_segmentation/output_normal" />
    </node>
</launch>
